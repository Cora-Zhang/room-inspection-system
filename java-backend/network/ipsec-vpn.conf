# IPsec VPN配置（StrongSwan）
# 用于跨机房监控数据汇聚

# ==================== 基本配置 ====================
config setup
    charondebug="ike 2, knl 2, cfg 2, net 2, esp 2, dmn 2, mgr 2"
    uniqueids=no

# ==================== 机房A配置 ====================
conn room_inspection_vpn_a_to_b
    # 左侧配置（机房A）
    left=10.0.1.1
    leftid=@room-a.roominspection.com
    leftsubnet=10.0.1.0/24
    leftrsasigkey=0sAQO5X...  # 替换为实际的公钥

    # 右侧配置（机房B）
    right=10.0.2.1
    rightid=@room-b.roominspection.com
    rightsubnet=10.0.2.0/24
    rightrsasigkey=0sAQO5Y...  # 替换为实际的公钥

    # 认证方式
    authby=rsasig

    # 加密配置
    ike=aes256-sha2_256-modp2048!
    esp=aes256-sha2_256!
    keyexchange=ikev2

    # 连接参数
    auto=add
    dpdaction=restart
    dpddelay=30s
    dpdtimeout=120s
    rekey=no

# 机房A到机房C
conn room_inspection_vpn_a_to_c
    left=10.0.1.1
    leftid=@room-a.roominspection.com
    leftsubnet=10.0.1.0/24
    leftrsasigkey=0sAQO5Z...  # 替换为实际的公钥

    right=10.0.3.1
    rightid=@room-c.roominspection.com
    rightsubnet=10.0.3.0/24
    rightrsasigkey=0sAQO5X...  # 替换为实际的公钥

    authby=rsasig
    ike=aes256-sha2_256-modp2048!
    esp=aes256-sha2_256!
    keyexchange=ikev2
    auto=add
    dpdaction=restart
    dpddelay=30s
    dpdtimeout=120s

# ==================== 机房B配置 ====================
# 如果在机房B部署，复制此文件并修改left/right配置

# ==================== 预共享密钥（可选） ====================
# 如果使用PSK而非RSA密钥，取消以下注释并修改密钥
# : PSK "your-very-strong-pre-shared-key-here"
